!function(o,a){function l(o,l,n,t){function s(){a(document).on("click.$rsModal.open",function(o){a(o.target).closest(".modal-body").length||u.isVisible&&l.$broadcast(t.close)})}function e(){a(document).off("click.$rsModal.open")}function c(){for(var a in scopeObj)o[a]=null}function i(a){for(var l in a)o[l]=a[l]}function d(){a("rs-modal").addClass("modal-show"),a("rs-modal .modal-background").transition({opacity:1},f,"snap"),a("rs-modal .modal-body").transition({opacity:1,y:"2rem"},f,"snap",function(){u.isVisible=!0}),s()}function r(){a("rs-modal .modal-background").css({opacity:0}),a("rs-modal .modal-body").css({opacity:0,y:"0"}),a("rs-modal").removeClass("modal-show"),u.isVisible=!1,u.modalFlash="",e(),c()}function m(o,a){u.modalFlash=o,u.modalFlashType=a}var u=this;u.isVisible=!1,u.template="",u.modalFlash="",u.modalType="",u.close=r,l.$on(t.open,function(o,a,l,t){u.template=a,i(l),d(),""!==t&&n(function(){t()},50)}),l.$on(t.close,function(){r()}),l.$on(t.flash,function(o,a,l){m(a,l)});var f=300}function n(){return{restrict:"E",templateUrl:"rs-modal-template.html",controller:"RsModalCtrl",controllerAs:"vm"}}function t(o){o.put("rs-modal-template.html",'<div class="modal-background"><div class="modal-body"><div ng-click="vm.close()" class="close-button">X</div><div class="alert {{vm.modalFlashType}}" ng-show="vm.modalFlash">{{vm.modalFlash}}</div><ng-include src="vm.template"></ng-include></div></div>')}function s(o,a,l){function n(){var a=arguments[0]||"<h1>No template</h1>",n=arguments[1]||{},t=arguments[2]||"";o.$broadcast(l.open,a,n,t)}function t(){o.$broadcast(l.close)}function s(){var a=arguments[0]||"Please supply a message",n=arguments[1]||"alert-info";o.$broadcast(l.flash,a,n)}return{open:n,close:t,flash:s}}o.module("rs-modal",[]).factory("$rsModal",s).directive("rsModal",n).controller("RsModalCtrl",l).run(t),o.module("rs-modal").constant("MODAL_EVENTS",{open:"modal-open-event",close:"modal-close-event",flash:"modal-flash-event"}),l.$inject=["$scope","$rootScope","$timeout","MODAL_EVENTS"],t.$inject=["$templateCache"],s.$inject=["$rootScope","$templateCache","MODAL_EVENTS"]}(angular,$);