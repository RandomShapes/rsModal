!function(o,a){function l(o,l,t,n){function s(){a(document).on("click.$rsModal.open",function(o){a(o.target).closest(".modal-body").length||m.isVisible&&l.$broadcast(n.close)})}function e(){a(document).off("click.$rsModal.open")}function c(a){for(var l in a)o[l]=a[l]}function d(){a("rs-modal").addClass("modal-show"),a("rs-modal .modal-background").transition({opacity:1},u,"snap"),a("rs-modal .modal-body").transition({opacity:1,y:"2rem"},u,"snap",function(){m.isVisible=!0}),s()}function i(){a("rs-modal .modal-background").css({opacity:0}),a("rs-modal .modal-body").css({opacity:0,y:"0"}),a("rs-modal").removeClass("modal-show"),m.isVisible=!1,m.modalFlash="",e()}function r(o,a){m.modalFlash=o,m.modalFlashType=a}var m=this;m.isVisible=!1,m.template="",m.modalFlash="",m.modalType="",m.close=i,l.$on(n.open,function(o,a,l,n){m.template=a,c(l),d(),""!==n&&t(function(){n()},50)}),l.$on(n.close,function(){i()}),l.$on(n.flash,function(o,a,l){r(a,l)});var u=300}function t(){return{restrict:"E",templateUrl:"rs-modal-template.html",controller:"RsModalCtrl",controllerAs:"vm"}}function n(o){o.put("rs-modal-template.html",'<div class="modal-background"><div class="modal-body"><div ng-click="vm.close()" class="close-button">X</div><div class="alert {{vm.modalFlashType}}" ng-show="vm.modalFlash">{{vm.modalFlash}}</div><ng-include src="vm.template"></ng-include></div></div>')}function s(o,a,l){function t(){var t=arguments[0],n=arguments[1]||{},s=arguments[2]||"";"undefined"==typeof a.get(t)&&(a.put("$rsModal.html",t),t="$rsModal.html"),o.$broadcast(l.open,t,n,s)}function n(){o.$broadcast(l.close)}function s(){var a=arguments[0]||"Please supply a message",t=arguments[1]||"alert-info";o.$broadcast(l.flash,a,t)}return{open:t,close:n,flash:s}}o.module("rs-modal",[]).factory("$rsModal",s).directive("rsModal",t).controller("RsModalCtrl",l).run(n),o.module("rs-modal").constant("MODAL_EVENTS",{open:"modal-open-event",close:"modal-close-event",flash:"modal-flash-event"}),l.$inject=["$scope","$rootScope","$timeout","MODAL_EVENTS"],n.$inject=["$templateCache"],s.$inject=["$rootScope","$templateCache","MODAL_EVENTS"]}(angular,$);